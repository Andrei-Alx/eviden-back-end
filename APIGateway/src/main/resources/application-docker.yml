spring:
  cloud:
    gateway:
      default-filters:
        - DedupeResponseHeader=Access-Control-Allow-Credentials, RETAIN_FIRST
        - DedupeResponseHeader=Access-Control-Allow-Origin, RETAIN_FIRST
      ## Disabling cors ¯\(°_o)/¯
      globalcors:
        cors-configurations:
          "[/**]":
            allowed-origins: "*"
            allowed-methods: "*"
            allowed-headers: "*"
            allow-credentials: false
            max-age: 3600
      routes:
        - id: cardService-cards
          uri: ${URI_CARDSERVICE:http://card-service:8001}
          predicates:
            - Path=/api/cards/**
        - id: cardService-cardSets
          uri: ${URI_CARDSERVICE:http://card-service:8001}
          predicates:
            - Path=/api/cardSets/**

        - id: gameAppBff-gameappbff
          uri: ${URI_GAMEAPPBFF:http://gameappbff:8004}
          predicates:
            - Path=/api/gameappbff/**
        - id: gameAppBff-results
          uri: ${URI_GAMEAPPBFF:http://gameappbff:8004}
          predicates:
            - Path=/api/results/**

        - id: gameService
          uri: ${URI_GAMESERVICE:http://game-service:8005}
          predicates:
            - Path=/api/game/**

        - id: lobbyService-lobby
          uri: ${URI_LOBBYSERVICE:http://lobby-service:8006}
          predicates:
            - Path=/api/lobby/**

        - id: roundService-round
          uri: ${URI_ROUNDSERVICE:http://round-service:8002}
          predicates:
            - Path=/api/round/**

        - id: gameAppBffWebsocket
          uri: ${URI_WS_GAMEAPPBFF:ws://gameappbff:8004}
          predicates:
            - Path=/websocket/gameappbff/**
 
        - id: AuthenticationService-authentication
          uri: ${URI_AUTHENTICATIONSERVICE:http://authentication-service:8011}
          predicates:
            - Path=/api/gamemaster/**
    
  logging:
    level:
      root: DEBUG

#front-end: http://game-app:80
#
#uri:
#  ws:
#    gameappbff: ws://gameappbff:8004
#  cardservice: http://card-service:8001
#  gameappbff: http://gameappbff:8004
#  gameservice: http://game-service:8005
#  lobbyservice: http://lobby-service:8006
#  roundservice: http://round-service:8002
#  authenticationservice: http://authentication-service:8011
